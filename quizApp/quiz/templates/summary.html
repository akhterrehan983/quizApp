{% load static %}

<!DOCTYPE html>
<html lang="en">
<link rel="stylesheet" href="{% static 'css/app.css' %}">
<link rel="stylesheet" href="{% static 'css/game.css' %}">

<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta http-equiv="X-UA-Compatible" content="ie=edge" />
    <title>Quick Quiz - Play</title>
    <link rel="stylesheet" href="app.css" />
    <link rel="stylesheet" href="game.css" />
    <script src="https://kit.fontawesome.com/cb5dbd0d38.js" crossorigin="anonymous"></script>
</head>
<style>
    div.sticky {
      position: -webkit-sticky;
      position: sticky;
      top: 0;
      background-color: yellow;
      padding: 10px;
      font-size: 10px;
    }
    </style>
<body>
   
        
        
    {% for question, choice in questions.items %} 
        <div class="container" style="margin-top:30px;">
            <div id="game" class="justify-center flex-column" >
                <h3>{{ forloop.counter }}) {{question}}</h3>
                <input type="hidden" name="question{{ forloop.counter0 }}"
                value="{{ question }}"  />
                {% if choice.4 == choice.5 and choice.4 == 1 %}
                <div class="choice-container"  style="background-color:#5cb85c;">
                    <p class="choice-prefix">A</p>
                    <input style="margin-left:10px;" type="radio" name={{ forloop.counter0 }} value="1" checked>
                    <p class="choice-text">{{choice.0}}<i style="margin-left:10px;" class="fa-solid fa-check"></i></p>
                </div>
                {% elif choice.5 == 1 %}
                <div class="choice-container" style="background-color:#e89c9c;">
                    <p class="choice-prefix">A</p>
                    <input style="margin-left:10px;" type="radio" name={{ forloop.counter0 }} value="1" checked>
                    <p class="choice-text">{{choice.2}}<i style="margin-left:10px;" class="fa-solid fa-xmark"></i></p>
                </div>
                {% else %}
                <div class="choice-container">
                    <p class="choice-prefix">A</p>
                    <input style="margin-left:10px;" type="radio" name={{ forloop.counter0 }} value="1">
                    <p class="choice-text">{{choice.0}}</p>
                </div>
                {% endif %}

                {% if choice.4 == choice.5 and choice.4 == 2 %}
                <div class="choice-container"  style="background-color:#5cb85c;">
                    <p class="choice-prefix">B</p>
                    <input style="margin-left:10px;" type="radio" name={{ forloop.counter0 }} value="1" checked>
                    <p class="choice-text">{{choice.1}}<i style="margin-left:10px;" class="fa-solid fa-check"></i></p>
                </div>
                {% elif choice.5 == 2 %}
                <div class="choice-container" style="background-color:#e89c9c;">
                    <p class="choice-prefix">B</p>
                    <input style="margin-left:10px;" type="radio" name={{ forloop.counter0 }} value="1" checked>
                    <p class="choice-text">{{choice.1}}<i style="margin-left:10px;" class="fa-solid fa-xmark"></i></p>
                </div>
                {% else %}
                <div class="choice-container">
                    <p class="choice-prefix">B</p>
                    <input style="margin-left:10px;" type="radio" name={{ forloop.counter0 }} value="1">
                    <p class="choice-text">{{choice.1}}</p>
                </div>
                {% endif %}

                {% if choice.4 == choice.5 and choice.4 == 3 %}
                <div class="choice-container"  style="background-color:#5cb85c;">
                    <p class="choice-prefix">C</p>
                    <input style="margin-left:10px;" type="radio" name={{ forloop.counter0 }} value="1" checked>
                    <p class="choice-text">{{choice.2}}<i style="margin-left:10px;" class="fa-solid fa-check"></i></p>
                </div>
                {% elif choice.5 == 3 %}
                <div class="choice-container" style="background-color:#e89c9c;">
                    <p class="choice-prefix">C</p>
                    <input style="margin-left:10px;" type="radio" name={{ forloop.counter0 }} value="1" checked>
                    <p class="choice-text">{{choice.2}}<i style="margin-left:10px;" class="fa-solid fa-xmark"></i></p>
                </div>
                {% else %}
                <div class="choice-container">
                    <p class="choice-prefix">C</p>
                    <input style="margin-left:10px;" type="radio" name={{ forloop.counter0 }} value="1">
                    <p class="choice-text">{{choice.2}}</p>
                </div>
                {% endif %}

                {% if choice.4 == choice.5 and choice.4 == 4 %}
                <div class="choice-container"  style="background-color:#5cb85c;">
                    <p class="choice-prefix">D</p>
                    <input style="margin-left:10px;" type="radio" name={{ forloop.counter0 }} value="1" checked>
                    <p class="choice-text">{{choice.3}}<i style="margin-left:10px;" class="fa-solid fa-check"></i></p>
                </div>
                {% elif choice.5 == 4 %}
                <div class="choice-container" style="background-color:#e89c9c;">
                    <p class="choice-prefix">D</p>
                    <input style="margin-left:10px;" type="radio" name={{ forloop.counter0 }} value="1" checked>
                    <p class="choice-text">{{choice.3}}<i style="margin-left:10px;" class="fa-solid fa-xmark"></i></p>
                </div>
                {% else %}
                <div class="choice-container">
                    <p class="choice-prefix">D</p>
                    <input style="margin-left:10px;" type="radio" name={{ forloop.counter0 }} value="1">
                    <p class="choice-text">{{choice.3}}</p>
                </div>
                {% endif %}
                
                {% if choice.5 == null %}
                <div class="choice-container">
                    <p class="choice-prefix" style="background-color:#C4B454;">Not Attempted </p>
                    <p class="choice-text" style="background-color:#5F9EA0;">Correct option{{choice.4}}</p>
                    <!-- <p class="choice-text">D<i style="margin-left:10px;" class="fa-solid fa-xmark"></i></p> -->
                </div>
        
                {% elif choice.4 != choice.5 %}
                <div class="choice-container">
                    <p class="choice-prefix" style="background-color:#5F9EA0;">Correct option </p>
                    <p class="choice-text">{{ choice.4|to_charCap }}</p>
                </div>
                {% endif %}

                
            </div>
        </div>
        {% endfor %}

    


    <script>
        // The data/time we want to countdown to
        var duration = parseInt("{{duration}}");
        var countDownDate = new Date().getTime()+(duration/60)*60*60*1000;
        // countDownDate.setTime(countDownDate+60*1000)
        console.log(typeof(duration));
        
        // Run myfunc every second
        var myfunc = setInterval(function() {
    
        var now = new Date().getTime();
        // console.log(now);

        var timeleft = countDownDate - now;
            
        // Calculating the days, hours, minutes and seconds left
        var hours = Math.floor((timeleft % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60));
        var minutes = Math.floor((timeleft % (1000 * 60 * 60)) / (1000 * 60));
        var seconds = Math.floor((timeleft % (1000 * 60)) / 1000);
            
        document.getElementById("timeLeft").innerHTML = "TimeLeft: " + hours + "h " + minutes + "m " + seconds + "s"
        // Display the message when countdown is over
        if (timeleft < 0) {
            clearInterval(myfunc);
            document.getElementById("timeLeft").innerHTML = "" 
            document.getElementById("end").innerHTML = "TIME UP!!";
            location.href = '{% url "quizSubmit" %}'
        }
        }, 1000);
        </script>



</body>

</html>